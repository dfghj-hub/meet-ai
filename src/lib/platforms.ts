export interface PlatformRule {
  id: PlatformId;
  name: string;
  icon: string;
  maxTitleLength: number;
  maxBodyLength: number;
  tagPrefix: string;
  maxTags: number;
  toneGuidance: string;
  contentStructure: string;
  bestPractices: string[];
  hooks: string[];
  ctaPatterns: string[];
}

export type PlatformId =
  | "xiaohongshu"
  | "douyin"
  | "wechat"
  | "bilibili"
  | "kuaishou";

export const PLATFORM_RULES: Record<PlatformId, PlatformRule> = {
  xiaohongshu: {
    id: "xiaohongshu",
    name: "å°çº¢ä¹¦",
    icon: "ðŸ“•",
    maxTitleLength: 20,
    maxBodyLength: 1000,
    tagPrefix: "#",
    maxTags: 10,
    toneGuidance:
      "é—ºèœœåˆ†äº«å¼ï¼ŒçœŸè¯šã€æœ‰æ¸©åº¦ã€å¸¦ä¸ªäººä½“éªŒæ„Ÿã€‚ç”¨ç¬¬ä¸€äººç§°å™è¿°ï¼Œåƒåœ¨å’Œæœ‹å‹èŠå¤©ã€‚é€‚å½“ä½¿ç”¨ emoji å¢žåŠ äº²å’ŒåŠ›ï¼Œä½†ä¸è¿‡åº¦å †ç Œã€‚",
    contentStructure:
      "æ ‡é¢˜ç”¨æ•°å­—/ç—›ç‚¹/åè½¬å¼•çˆ†ç‚¹å¼€å¤´ â†’ æ­£æ–‡å…ˆæŠ›ç—›ç‚¹å†ç»™æ–¹æ¡ˆ â†’ åˆ—æ¸…å•å¼å¹²è´§ â†’ ç»“å°¾äº’åŠ¨æé—®æˆ– CTA",
    bestPractices: [
      "æ ‡é¢˜å¿…é¡»æœ‰æ•°å­—æˆ–ç—›ç‚¹è¯ï¼Œå¦‚ã€Œ5 ä¸ªã€ã€ŒåŽæ‚”æ²¡æ—©çŸ¥é“ã€",
      "æ­£æ–‡åˆ†æ®µæ¸…æ™°ï¼Œæ¯æ®µä¸è¶…è¿‡ 3 è¡Œ",
      "å›¾æ–‡ç¬”è®°ï¼šæ­£æ–‡ 300-600 å­—æœ€ä½³",
      "è§†é¢‘ç¬”è®°å°é¢æ–‡å­—è¦å¤§ã€è¦é†’ç›®",
      "è¯é¢˜æ ‡ç­¾æ··åˆçƒ­é—¨å¤§è¯å’Œç²¾å‡†é•¿å°¾è¯",
      "å‘å¸ƒæ—¶é—´ï¼šæ™š 7-10 ç‚¹ã€åˆä¼‘ 12-13 ç‚¹",
    ],
    hooks: [
      "å§å¦¹ä»¬ï¼è¿™ä¸ª {product} çœŸçš„ç»äº†ï¼",
      "åŽæ‚”æ²¡æ—©ä¹°ï¼{product} ç”¨äº† {duration} çš„çœŸå®žæ„Ÿå—",
      "åˆ«å†è¸©é›·äº†ï¼{product} çº¢é»‘æ¦œ",
      "æ•‘å‘½ï¼{product} ä¹Ÿå¤ªå¥½ç”¨äº†å§",
      "{product} æµ‹è¯„ï½œç”¨å®Œä¸€æ•´ç“¶æ¥è¯´è¯´çœŸè¯",
    ],
    ctaPatterns: [
      "å§å¦¹ä»¬è§‰å¾—æœ‰ç”¨çš„è¯è®°å¾—ç‚¹èµžæ”¶è—å‘€ï½ž",
      "ä½ ä»¬æœ‰ä»€ä¹ˆå¥½ç”¨çš„æŽ¨èï¼Ÿè¯„è®ºåŒºèŠèŠï½ž",
      "éœ€è¦çš„å§å¦¹ç›´æŽ¥å†²ï¼Œä¸ä¼šåŽæ‚”çš„ï¼",
      "å…³æ³¨æˆ‘ï¼ŒæŒç»­åˆ†äº«å¥½ç‰©ï½ž",
    ],
  },

  douyin: {
    id: "douyin",
    name: "æŠ–éŸ³",
    icon: "ðŸŽµ",
    maxTitleLength: 30,
    maxBodyLength: 300,
    tagPrefix: "#",
    maxTags: 5,
    toneGuidance:
      "çŸ­å¹³å¿«ã€èŠ‚å¥æ„Ÿå¼ºã€å£è¯­åŒ–ã€‚å‰ 3 ç§’å¿…é¡»æœ‰å¼ºé’©å­ç•™ä½ç”¨æˆ·ã€‚è¯­è¨€ç›´ç™½æœ‰å†²å‡»åŠ›ï¼Œé¿å…é•¿ç¯‡å¤§è®ºã€‚",
    contentStructure:
      "é’©å­å¥ï¼ˆå‰ 3 ç§’æŠ“æ³¨æ„åŠ›ï¼‰â†’ ç—›ç‚¹å…±é¸£ â†’ äº§å“å±•ç¤º/è§£å†³æ–¹æ¡ˆ â†’ ä½¿ç”¨æ•ˆæžœ â†’ è¡ŒåŠ¨å·å¬",
    bestPractices: [
      "å‰ 3 ç§’å†³å®šç”Ÿæ­»ï¼Œå¿…é¡»æœ‰å¼ºé’©å­",
      "å£æ’­è„šæœ¬æŽ§åˆ¶åœ¨ 30-60 ç§’",
      "æ–‡æ¡ˆç®€çŸ­æœ‰åŠ›ï¼Œæ¯å¥ä¸è¶…è¿‡ 15 å­—",
      "è¯é¢˜æ ‡ç­¾ 3-5 ä¸ªï¼Œ1 ä¸ªçƒ­é—¨ + 2 ä¸ªåž‚ç±»",
      "å‘å¸ƒæ—¶é—´ï¼šåˆä¼‘ 12-13 ç‚¹ã€æ™š 18-20 ç‚¹ã€æ·±å¤œ 22-23 ç‚¹",
      "è¯„è®ºåŒºç½®é¡¶è¡¥å……è´­ä¹°ä¿¡æ¯",
    ],
    hooks: [
      "å®¶äººä»¬è°æ‡‚å•Šï¼è¿™ä¸ª {product} å¤ªç¦»è°±äº†ï¼",
      "åƒä¸‡åˆ«ä¹° {product}ï¼å› ä¸ºä½ ä¼šå›žè´­åˆ°åœä¸ä¸‹æ¥",
      "3 ç§’å‘Šè¯‰ä½  {product} åˆ°åº•å€¼ä¸å€¼å¾—ä¹°",
      "{product} çš„éšè—ç”¨æ³•ï¼Œ99% çš„äººä¸çŸ¥é“",
      "è¿™å¯èƒ½æ˜¯ä½ ä»Šå¹´æœ€å€¼çš„ä¸€ç¬”æ¶ˆè´¹",
    ],
    ctaPatterns: [
      "æƒ³è¦çš„è¯„è®ºåŒºæ‰£ 1ï¼Œæˆ‘ç§ä½ é“¾æŽ¥",
      "å…³æ³¨æˆ‘ï¼Œæ¯å¤©åˆ†äº«å¥½ç‰©ä¸è¸©é›·",
      "åŒå‡»â¤ï¸æ”¶è—ï¼Œä¸‹æ¬¡æ‰¾ä¸åˆ°äº†",
      "ç›´æŽ¥ç‚¹ä¸‹æ–¹å°é»„è½¦å°±èƒ½æ‹¿ä¸‹",
    ],
  },

  wechat: {
    id: "wechat",
    name: "å¾®ä¿¡è§†é¢‘å·",
    icon: "ðŸ’¬",
    maxTitleLength: 30,
    maxBodyLength: 500,
    tagPrefix: "#",
    maxTags: 5,
    toneGuidance:
      "æ¸©å’Œä¸“ä¸šã€æœ‰ä¿¡ä»»æ„Ÿã€‚é¢å‘ 25-50 å²ç”¨æˆ·ç¾¤ä½“ï¼Œè¯­è¨€æˆç†Ÿç¨³é‡ï¼Œé¿å…è¿‡äºŽç½‘ç»œåŒ–çš„ç”¨è¯­ã€‚å¼ºè°ƒå“è´¨å’Œæ€§ä»·æ¯”ã€‚",
    contentStructure:
      "ä¿¡ä»»å»ºç«‹ï¼ˆèº«ä»½/èµ„è´¨/çœŸå®žä½“éªŒï¼‰â†’ äº§å“å±•ç¤º â†’ æ·±åº¦å¯¹æ¯”/æµ‹è¯„ â†’ ç†æ€§æ€»ç»“ â†’ æ¸©å’ŒæŽ¨è",
    bestPractices: [
      "å†…å®¹åå‘æ·±åº¦ã€æœ‰è´¨æ„Ÿï¼Œé¿å…è¿‡åº¦è¥é”€æ„Ÿ",
      "é€‚åˆçŸ¥è¯†åˆ†äº«åž‹ã€æµ‹è¯„åž‹ã€ç”Ÿæ´»æ–¹å¼ç±»å†…å®¹",
      "æ–‡æ¡ˆå¯ä»¥ç¨é•¿ï¼Œ300-500 å­—ä¹Ÿèƒ½æœ‰ä¸é”™é˜…è¯»é‡",
      "å–„ç”¨ç§åŸŸå¯¼æµï¼Œå¼•å¯¼æ·»åŠ å¾®ä¿¡/è¿›ç¾¤",
      "å‘å¸ƒæ—¶é—´ï¼šæ—© 7-9 ç‚¹ã€åˆä¼‘ 12-13 ç‚¹ã€æ™š 20-22 ç‚¹",
      "è½¬å‘æœ‹å‹åœˆé…ä¸€æ®µçœŸå®žæ„Ÿå—å¢žåŠ å¯ä¿¡åº¦",
    ],
    hooks: [
      "ç”¨äº† {duration}ï¼Œè¯´è¯´ {product} çš„çœŸå®žæ„Ÿå—",
      "ä½œä¸º {identity}ï¼Œæˆ‘ä¸ºä»€ä¹ˆæŽ¨è {product}",
      "è¿™æ¬¾ {product} åˆ°åº•å€¼ä¸å€¼ï¼Ÿçœ‹å®Œä½ å°±çŸ¥é“äº†",
      "æœ‹å‹æŽ¨èçš„ {product}ï¼Œæ²¡æƒ³åˆ°çœŸçš„å¥½ç”¨",
    ],
    ctaPatterns: [
      "è§‰å¾—æœ‰å¸®åŠ©çš„è¯ï¼Œå¸®å¿™è½¬å‘ç»™éœ€è¦çš„æœ‹å‹",
      "æƒ³äº†è§£æ›´å¤šå¯ä»¥ç§ä¿¡æˆ‘äº¤æµ",
      "ç‚¹èµžå…³æ³¨ï¼Œä¸‹æœŸåˆ†äº«æ›´å¤šå¥½ç‰©",
      "è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘ä¼šä¸€ä¸€å›žå¤",
    ],
  },

  bilibili: {
    id: "bilibili",
    name: "Bç«™",
    icon: "ðŸ“º",
    maxTitleLength: 40,
    maxBodyLength: 2000,
    tagPrefix: "#",
    maxTags: 5,
    toneGuidance:
      "çœŸå®žã€ç¡¬æ ¸ã€æœ‰æ·±åº¦ã€‚Bç«™ç”¨æˆ·åæ„Ÿçº¯å¹¿å‘Šï¼Œå¿…é¡»æœ‰å¹²è´§ä»·å€¼ã€‚å¯ä»¥å¹½é»˜ä½†ä¸èƒ½è™šå‡ã€‚æ•°æ®è¯´è¯ã€å¯¹æ¯”æµ‹è¯„æœ€å—æ¬¢è¿Žã€‚",
    contentStructure:
      "é€‰é¢˜å¼•å…¥ï¼ˆä¸ºä»€ä¹ˆåšè¿™æœŸï¼‰â†’ äº§å“è¯¦ç»†ä»‹ç» â†’ æ·±åº¦æµ‹è¯„/å¯¹æ¯” â†’ ä¼˜ç¼ºç‚¹å¦è¯šåˆ†æž â†’ è´­ä¹°å»ºè®® â†’ æ€»ç»“äº’åŠ¨",
    bestPractices: [
      "å¿…é¡»æœ‰çœŸå®žæµ‹è¯„å†…å®¹ï¼Œçº¯è½¯å¹¿ä¼šè¢«å¼¹å¹•éª‚",
      "è§†é¢‘æ—¶é•¿ 5-15 åˆ†é’Ÿæ•ˆæžœæœ€ä½³",
      "å°é¢æ ‡é¢˜è¦æœ‰ä¿¡æ¯é‡ï¼Œé¿å…æ ‡é¢˜å…š",
      "ç®€ä»‹åŒºæ”¾æ—¶é—´è½´ã€ç›¸å…³é“¾æŽ¥",
      "é€‚å½“è‡ªå˜²å’ŒçŽ©æ¢—å¢žåŠ äº²å’ŒåŠ›",
      "å‘å¸ƒæ—¶é—´ï¼šæ™š 18-22 ç‚¹ã€å‘¨æœ«ä¸‹åˆ",
    ],
    hooks: [
      "å…¨ç½‘æœ€è¯¦ç»†çš„ {product} æµ‹è¯„æ¥äº†",
      "èŠ±äº† {price} ä¹°çš„ {product}ï¼Œå€¼ä¸å€¼ï¼Ÿ",
      "{product} æ·±åº¦ä½“éªŒ {duration}ï¼Œè¯¥è¯´çš„éƒ½è¯´äº†",
      "UPä¸»äº²æµ‹ï¼{product} åˆ°åº•æ˜¯ä¸æ˜¯æ™ºå•†ç¨Žï¼Ÿ",
    ],
    ctaPatterns: [
      "è§‰å¾—æœ‰ç”¨çš„è¯ä¸€é”®ä¸‰è¿žæ”¯æŒä¸€ä¸‹ UP ä¸»",
      "æœ‰ä»€ä¹ˆæƒ³çœ‹çš„æµ‹è¯„ï¼Ÿè¯„è®ºåŒºå‘Šè¯‰æˆ‘",
      "å…³æ³¨ä¸è¿·è·¯ï¼Œä¸‹æœŸæ›´ç²¾å½©",
      "ç®€ä»‹åŒºæœ‰é“¾æŽ¥å’Œæ—¶é—´è½´ï¼Œè‡ªå–",
    ],
  },

  kuaishou: {
    id: "kuaishou",
    name: "å¿«æ‰‹",
    icon: "âš¡",
    maxTitleLength: 25,
    maxBodyLength: 300,
    tagPrefix: "#",
    maxTags: 5,
    toneGuidance:
      "æŽ¥åœ°æ°”ã€çœŸå®žã€æ€§ä»·æ¯”å¯¼å‘ã€‚å¿«æ‰‹ç”¨æˆ·åå‘ä¸‹æ²‰å¸‚åœºï¼Œå–œæ¬¢å®žåœ¨ã€ä¸è£…çš„å†…å®¹ã€‚å¼ºè°ƒå®žç”¨æ€§å’Œä»·æ ¼ä¼˜åŠ¿ã€‚",
    contentStructure:
      "å¼€é—¨è§å±±å±•ç¤ºäº§å“ â†’ ä½¿ç”¨æ¼”ç¤º/æ•ˆæžœå¯¹æ¯” â†’ ä»·æ ¼ä¼˜åŠ¿ â†’ é™æ—¶ä¼˜æƒ ä¿¡æ¯ â†’ ä¸‹å•å¼•å¯¼",
    bestPractices: [
      "å†…å®¹è¦æŽ¥åœ°æ°”ï¼Œé¿å…è¿‡äºŽç²¾è‡´çš„åŒ…è£…",
      "ç›´æŽ¥å±•ç¤ºä½¿ç”¨æ•ˆæžœï¼Œçœ¼è§ä¸ºå®ž",
      "å¼ºè°ƒæ€§ä»·æ¯”å’Œå®žç”¨æ€§",
      "å£æ’­äº²åˆ‡è‡ªç„¶ï¼Œåƒé‚»å±…èŠå¤©",
      "ç›´æ’­åˆ‡ç‰‡æ•ˆæžœå¥½ï¼Œå¯å¤ç”¨ç›´æ’­é«˜å…‰ç‰‡æ®µ",
      "å‘å¸ƒæ—¶é—´ï¼šåˆ 11-13 ç‚¹ã€æ™š 19-21 ç‚¹",
    ],
    hooks: [
      "è€é“ä»¬çœ‹çœ‹è¿™ä¸ª {product}ï¼ŒçœŸå¿ƒä¸é”™",
      "ä»Šå¤©ç»™å®¶äººä»¬æŽ¨èä¸€ä¸ªå¥½ä¸œè¥¿",
      "{product} åªè¦ {price}ï¼ŒçœŸçš„å¤ªåˆ’ç®—äº†",
      "ç”¨äº† {product} ä¹‹åŽï¼Œå†ä¹Ÿå›žä¸åŽ»äº†",
    ],
    ctaPatterns: [
      "è€é“ä»¬è§‰å¾—å¥½çš„åŒå‡» 666",
      "æƒ³è¦çš„è€é“ç‚¹ä¸‹é¢é“¾æŽ¥ç›´æŽ¥æ‹",
      "å…³æ³¨æˆ‘ï¼Œå¤©å¤©ç»™å®¶äººä»¬æ‰¾å¥½è´§",
      "æœ‰é—®é¢˜è¯„è®ºåŒºé—®ï¼Œæˆ‘çœ‹åˆ°å°±å›ž",
    ],
  },
};

export const ALL_PLATFORM_IDS: PlatformId[] = [
  "xiaohongshu",
  "douyin",
  "wechat",
  "bilibili",
  "kuaishou",
];

export const DEFAULT_PLATFORMS: PlatformId[] = ["xiaohongshu", "douyin"];

export function getPlatformRule(id: PlatformId): PlatformRule {
  return PLATFORM_RULES[id];
}

export function getPlatformRulesForPrompt(id: PlatformId): string {
  const r = PLATFORM_RULES[id];
  return [
    `å¹³å°ï¼š${r.name}`,
    `æ ‡é¢˜ä¸Šé™ï¼š${r.maxTitleLength} å­—`,
    `æ­£æ–‡ä¸Šé™ï¼š${r.maxBodyLength} å­—`,
    `æ ‡ç­¾æ ¼å¼ï¼š${r.tagPrefix}æ ‡ç­¾åï¼Œæœ€å¤š ${r.maxTags} ä¸ª`,
    `è°ƒæ€§è¦æ±‚ï¼š${r.toneGuidance}`,
    `å†…å®¹ç»“æž„ï¼š${r.contentStructure}`,
    `æœ€ä½³å®žè·µï¼š\n${r.bestPractices.map((p) => `  - ${p}`).join("\n")}`,
    `å¼€å¤´é’©å­å‚è€ƒï¼š\n${r.hooks.map((h) => `  - ${h}`).join("\n")}`,
    `CTA å‚è€ƒï¼š\n${r.ctaPatterns.map((c) => `  - ${c}`).join("\n")}`,
  ].join("\n");
}
